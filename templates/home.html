{% extends "layout.html" %}

{%- macro status(val) -%}
  {%- if val == "yes" -%}
    <span class="yes">âœ”</span>
  {%- elif val == "no" -%}
    <span class="no">-<span>
  {%- elif val == "na" -%}
    <span class="na">n/a</span>
  {%- endif -%}
{%- endmacro -%}

{% block css %}
  <link href="/static/home.css" rel="stylesheet">
{% endblock %}

{% block body %}
  <div>
  <table id="output">
    <thead>
      <tr class="angle">
        <th title=""></th>
        <th title=""></th>
        <th title=""></th>
        <th title=""></th>
        <th title="Who is working on the project?  Developers, Product, and UX." class="end">Heroes</th>
        <th title="What value are we adding? What are the business goals? Do we have interest? Do we have budget? Who is championing the idea? What is the scope proposal?" class="end">Define</th>
        <th title="What is the scope? Who are our partners? What does it look like?  What is the functionality? How do we measure success? User stories, mockups, and PRDs live here." class="end">Design</th>
        <th title="Has the code been written?" class="end">Coding</th>
        <th title="Has QA signed off?" class="end">Testing</th>
        <th title="" class="end">Launch</th>
        <th class=""></th>
      </tr>
    </thead>
    <tbody>
      {% for item in results %}
        <tr id="{{item['name']|safe|lower|replace(" ","_")}}" class="">
          <td class="">{{ loop.index }}</td>
          <td class="">{{ item['Phase'][3:] }}<span class="tshirt" title="T-Shirt sizes:  S = 0-2 weeks; M=3-4 weeks; L = 4-6 weeks; XL = 7+ weeks">{{ item['T-shirt'] }}</span></td>
          <td class="">{{ item['Priority'] }}</td>
          <td class="project">
            {%- if item['podio_link'] -%}
              <a class="glyphicon glyphicon-pencil" href="{{ item['podio_link'] }}#edit" target="_blank"></a>
            {%- endif -%}
            <span>
            {{ item['name'] }}
            <div class="team">
                {% if item['Team'] is string %}
                    {{ item['Team'] }}
                {% else %}
                    {% for t in item['Team'] %}
                        {{ t }},
                    {% endfor %}
                {% endif %}
            </div>
            </span>

          </td>
          <td class="flag heroes end">
            <span class="dev" title="Development Team">{{ item['team_developers'] }}</span>
            <span class="prod" title="Product Team">{{ item['team_product'] }}</span>
            <span class="ux" title="User Interface Team">{{ item['team_design'] }}</span>
          </td>

          <td class="flag percent end {{ item['Status']|lower }}">
            {% if item['Concept'] %}
              <span>{{ item['Concept'] }}%</span>
            {% else %}
              <span class="no">n/a</span>
            {% endif %}
            {% if item['Concept Docs'] %}
              <a class="glyphicon glyphicon-new-window" href="{{ item['Concept Docs'] }}" target="_blank"></a>
            {% endif %}
          </td>

          <td class="flag percent end {{ item['Status']|lower }}">
            {% if item['Design'] %}
              <span>{{ item['Design'] }}%</span>
            {% else %}
              <span class="no">n/a</span>
            {% endif %}
            {% if item['Requirements / Stories'] %}
              <a class="glyphicon glyphicon-new-window" href="{{ item['Requirements / Stories'] }}" target="_blank"></a>
            {% endif %}
          </td>

          <td class="flag percent {% if not item['Build'] %}no{% endif %} end {{ item['Status']|lower }}">
            {% if item['Build'] %}
              <span>{{ item['Build'] }}%</span>
            {% else %}
              <span class="no">n/a</span>
            {% endif %}
            {% if item['Build Bugs'] %}
              <a class="glyphicon glyphicon-new-window" href="{{ item['Build Bugs'] }}"></a>
            {% endif %}
          </td>

          <td class="flag percent {% if not item['Test'] %}no{% endif %} end {{ item['Status']|lower }}">
            {% if item['Test'] %}
              <span>{{ item['Test'] }}%</span>
            {% else %}
              <span class="no">n/a</span>
            {% endif %}
            {% if item['Support Docs'] %}
              <a class="glyphicon glyphicon-new-window" href="{{ item['Support Docs'] }}" target="_blank"></a>
            {% endif %}
          </td>
          <td class="flag launch end">{{ item['Target Launch']|prettydate }}</td>
          <td class="note">{{ item['Next Step']|safe }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  <div id="legend">
    <span class="green">On Track</span>
    <span class="yellow">Dodgy</span>
    <span class="red">In Trouble</span>
    <span class="paused">Paused</span>
  </div>
  </div>
{% endblock %}

{% block js %}
  <script src="/static/home.js"></script>
{% endblock %}
